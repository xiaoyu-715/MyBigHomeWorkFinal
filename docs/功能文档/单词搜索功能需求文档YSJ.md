# 单词搜索功能需求文档YSJ

## 1. 功能概述

实现一个完整的单词搜索与详情展示功能，用户可以通过搜索框输入单词，查看单词的详细信息，包括释义、音标、例句等，并支持收藏、复制、朗读等辅助功能。

## 2. 功能需求

### 2.1 搜索功能
- **搜索框**
  - 支持实时搜索，输入时显示搜索建议
  - 支持前缀匹配搜索（如输入"on"可以搜索到"on your behalf"）
  - 搜索历史记录（最近搜索的10个单词）
  - 清空搜索按钮

### 2.2 单词详情展示
- **基本信息**
  - 单词文本（大字体显示）
  - 音标（英式/美式可切换）
  - 难度等级标识
  - 词频标识

- **标签页切换**
  - **简明释义**：显示常用中文释义
  - **AI释义**：使用AI生成的详细解释（预留功能）
  - **AI解词**：AI生成的词根词缀分析（预留功能）

- **常用释义区域**
  - 显示单词的中文翻译
  - 支持做笔记功能（可编辑）

- **实用场景例句**
  - 显示2-5个实用例句
  - 每个例句包含：
    - 英文原句
    - 中文翻译
    - 来源标注
    - 收藏按钮
    - 复制按钮
    - 朗读按钮

### 2.3 辅助功能
- **生词本功能**
  - 点击"生词本"按钮将单词添加到生词本
  - 已添加的单词显示不同的图标状态

- **复制功能**
  - 复制单词
  - 复制释义
  - 复制例句

- **朗读功能**
  - 单词发音（英式/美式）
  - 例句朗读
  - 使用TTS或在线API

- **分享功能**
  - 分享单词卡片
  - 分享例句

### 2.4 导航功能
- **返回按钮**：返回上一页
- **更多选项**：
  - 字体大小调整
  - 主题切换
  - 设置

## 3. 数据来源

### 3.1 单词基本信息
- 来源：`dictionary_words` 表（约7万个单词）
- 字段：
  - `word`：单词文本
  - `phoneticUk`：英式音标
  - `phoneticUs`：美式音标
  - `translation`：中文翻译
  - `difficulty`：难度等级（1-10）
  - `frequency`：词频（0-1）
  - `acknowledgeRate`：认知率

### 3.2 例句数据
- **方案1**：使用预定义例句库（需要创建）
- **方案2**：集成在线API获取例句
- **方案3**：从现有的`DailySentence`表中匹配相关例句

### 3.3 生词本数据
- 使用现有的`DictionaryWordEntity`和用户收藏关联表
- 或创建新的`UserWordCollectionEntity`表

## 4. 界面设计要点

### 4.1 布局结构
```
┌─────────────────────────────┐
│ [←] 搜索框 [×] [⋮]          │
├─────────────────────────────┤
│ 简明 | AI释义 | AI解词       │
├─────────────────────────────┤
│                             │
│   on your behalf            │
│   [音标]          [+生词本]  │
│                             │
├─────────────────────────────┤
│ 释义 | 例句                 │
├─────────────────────────────┤
│                             │
│ 常用释义                     │
│ 以你的名义；代表你；          │
│                             │
│ [✏️ 做笔记]                  │
│                             │
├─────────────────────────────┤
│ 实用场景例句          实用 ▼ │
├─────────────────────────────┤
│                             │
│ 1. It's a bit much...       │
│    指望我替你...             │
│    ⭐ 收藏  📋 复制  🔊 朗读  │
│                             │
│ 2. Would you like...        │
│    你希望艾米丽...           │
│    ⭐ 收藏  📋 复制  🔊 朗读  │
│                             │
└─────────────────────────────┘
```

### 4.2 颜色方案
- 主色调：蓝色系（#2196F3）
- 强调色：橙色（#FF9800）用于"NEW"标签
- 背景色：白色/浅灰色
- 文字色：深灰色（#333333）

### 4.3 字体规范
- 单词：华文中宋，32sp，加阴影
- 音标：16sp
- 释义：华文中宋，18sp，加阴影
- 例句英文：16sp
- 例句中文：华文中宋，14sp

## 5. 技术实现要点

### 5.1 架构设计
- **Activity**：`WordSearchActivityYSJ`
- **ViewModel**：`WordSearchViewModelYSJ`
- **Repository**：使用现有的`DictionaryWordRepository`
- **Adapter**：
  - `SearchSuggestionAdapter`：搜索建议列表
  - `ExampleSentenceAdapter`：例句列表

### 5.2 关键技术
- **搜索优化**：使用`SearchView`或自定义搜索框
- **数据加载**：异步加载，使用`LiveData`
- **缓存机制**：缓存最近查看的单词详情
- **TTS朗读**：使用Android `TextToSpeech`
- **动画效果**：标签页切换动画、内容展开动画

### 5.3 性能优化
- 搜索防抖（300ms延迟）
- 例句分页加载
- 图片懒加载
- 内存缓存

## 6. 用户体验优化

### 6.1 交互优化
- 搜索框自动获取焦点
- 搜索建议点击直接跳转
- 下拉刷新获取更多例句
- 长按复制文本

### 6.2 错误处理
- 搜索无结果提示
- 网络错误提示
- 数据加载失败重试

### 6.3 无障碍支持
- 所有按钮添加`contentDescription`
- 支持TalkBack
- 支持字体缩放

## 7. 开发优先级

### P0（核心功能）
- 搜索框和搜索功能
- 单词详情展示
- 基本释义显示

### P1（重要功能）
- 例句显示
- 生词本功能
- 朗读功能

### P2（增强功能）
- AI释义（预留）
- AI解词（预留）
- 分享功能

### P3（优化功能）
- 搜索历史
- 笔记功能
- 主题切换

## 8. 测试要点

### 8.1 功能测试
- 搜索功能正常
- 单词详情正确显示
- 例句加载正常
- 生词本添加/移除正常
- 朗读功能正常

### 8.2 性能测试
- 搜索响应速度 < 300ms
- 页面加载时间 < 1s
- 内存占用 < 50MB

### 8.3 兼容性测试
- Android 7.0+
- 不同屏幕尺寸
- 横竖屏切换

## 9. 后续扩展

- 单词卡片学习模式
- 单词测验功能
- 词根词缀分析
- AI智能释义
- 语音搜索
- 离线下载例句

## 10. 参考资料

- 现有代码：
  - `DictionaryWordEntity.java`
  - `DictionaryWordDao.java`
  - `DictionaryWordRepository.java`
- 设计参考：用户提供的截图
- 词典数据：约7万个单词的完整词库
