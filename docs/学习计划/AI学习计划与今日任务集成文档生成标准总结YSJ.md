# AI学习计划与今日任务集成（三类文档）生成标准总结YSJ

## 0. 目的与适用范围

本标准用于统一以下三类项目文档的编写口径与质量要求，确保：
- 需求可理解、可验证、可追溯
- 设计可实现、可扩展、可测试
- 任务可执行、可排期、可度量

**适用文档**：
- 《AI学习计划与今日任务集成需求文档YSJ.md》（REQ）
- 《AI学习计划与今日任务集成设计文档YSJ.md》（DES）
- 《AI学习计划与今日任务集成开发任务清单YSJ.md》（TASK）

---

## 1. 通用生成规范（适用于REQ/DES/TASK）

### 1.1 文档控制信息（必须）
文档首页必须包含“文档控制信息”，至少覆盖：
- **基本信息**：文档名称、文档编号、版本号、创建日期、最后更新、状态（草稿/待评审/已发布）、密级、关联文档
- **责任人**：角色、人员/团队、职责
- **变更历史**：版本、日期、修改人、修改内容、审批人
- （可选）**审批记录**、**分发列表**（需求文档强制，其他文档建议）

### 1.2 命名与编号规则（必须）
- **文件名**：`[功能/模块名称][文档类型]YSJ.md`
- **文档编号**：
  - 需求文档：`REQ-YYYY-NNN-YSJ`
  - 设计文档：`DES-YYYY-NNN-YSJ`
  - 任务清单：`TASK-YYYY-NNN-YSJ`
- **版本号**：`vX.Y`
  - **X**：主版本（结构性/范围性重大变更）
  - **Y**：次版本（内容补充/修订）

### 1.3 统一格式规范（必须）
- Markdown标题层级清晰：`#`文档名，`##`章节，`###`小节
- 表格用于结构化信息（字段、约束、指标、责任人等）
- 图表在Markdown内以“**文本ASCII图**/Mermaid/PlantUML”表达（二选一即可，推荐保持全项目一致）

### 1.4 语言与可测试性规范（必须）
- 需求与验收标准尽量**可量化**：时间、成功率、并发、覆盖率等
- 避免模糊词：尽量不用“尽量/大概/差不多”，改为阈值与边界
- 每个关键功能点必须有对应验收标准或测试点

### 1.5 安全与隐私规范（必须）
- 不在文档中硬编码或明文暴露任何**API Key/Token**
- 如需说明第三方服务：仅写“配置项名/读取方式/示例占位符”，并提示放在安全位置

---

## 2. 需求文档（REQ）生成标准

### 2.1 必备章节结构（建议按顺序）
- **文档控制信息**（强制）
- **项目概述**：背景/痛点、目标、范围（In/Out）、干系人、业务价值（含ROI）、成功标准
- **需求分析**：用例图、用户故事、业务流程图、活动图、状态图、数据流图
- **功能需求**：模块拆分、每个模块“输入-处理-输出-约束/性能”
- **非功能需求**：性能、可靠性、可用性、可维护性、安全性、兼容性
- **数据需求**：核心数据模型、数据库实体、索引、外键
- **实施计划**：阶段划分、验收标准
- **风险与应对**：风险矩阵
- **附录**：术语表、参考文档

### 2.2 UML/图表清单与要求（必须覆盖核心链路）
- **用例图（Use Case）**：
  - 至少覆盖：生成计划、保存计划、生成今日任务、查看任务、完成任务（可扩展：编辑/删除/筛选/排序）
  - 明确 include/extend 关系
- **业务流程图**：至少2条
  - 计划生成与保存闭环
  - 今日任务生成（含幂等/去重）
- **活动图（Activity）**：至少1条（例如“完成任务并同步进度”）
- **状态图（State）**：至少2个对象（计划状态、任务状态）
- **数据流图（DFD）**：0层（系统上下文）+ 1层（系统内部）

### 2.3 用户故事与验收标准写法（必须）
每条用户故事包含：
- **作为/我想要/以便于** 三段式
- **验收标准**（可执行）：
  - 正向路径
  - 异常路径（网络失败、解析失败、保存失败）
  - 性能阈值（如：整体流程<15秒）

### 2.4 需求质量门槛（Checklist）
- [ ] 需求无歧义、可量化
- [ ] 关键需求都有验收标准
- [ ] 覆盖异常/边界（网络、解析、数据库、重复任务）
- [ ] 图表与文字描述一致
- [ ] In/Out范围清晰，避免需求膨胀

---

## 3. 设计文档（DES）生成标准

### 3.1 必备章节结构
- **文档控制信息**（强制，含关联REQ编号）
- **设计概述**：目标、原则（SOLID/MVVM/事务一致性/性能优先）、技术栈与版本
- **系统架构设计**：分层架构、数据流、类图、序列图、组件图
- **核心类设计**：职责、字段、核心方法签名、关键算法说明
- **数据库设计**：表结构、索引、外键关系、迁移策略
- **接口设计**：内部回调接口、关键方法输入输出、线程模型
- **异常处理**：异常分类、错误码/错误文案、降级策略
- **性能优化**：数据库/网络/UI
- **测试策略**：单元/集成/性能

### 3.2 UML/图表清单与要求
- **类图（Class Diagram）**：
  - 至少包含：Activity、Extractor、Repository、Service、Database/Dao、Entity/Model
  - 明确依赖关系（uses/contains/1:N）
- **序列图（Sequence Diagram）**：至少2条
  - 生成学习计划（AIChatActivity→Extractor→AI→Repository→Service）
  - 完成任务（Activity→Adapter→Repository→DB→UI刷新）
- **组件图（Component Diagram）**：体现分层与依赖方向（表现层→业务层→数据层→外部服务）

### 3.3 关键设计约束（必须写清）
- **事务一致性**：保存“计划+阶段+任务模板”必须事务化（成功全成功，失败全回滚）
- **幂等性**：今日任务生成必须支持重复调用不重复插入
- **去重策略**：相似度阈值与算法选择（如Levenshtein相似度>0.8）
- **线程模型**：IO在后台线程，UI回调在主线程

### 3.4 接口与错误规范（建议）
- 所有回调接口统一包含：成功回调 + 错误回调
- 错误提示需用户可理解，同时保留内部日志信息

### 3.5 设计质量门槛（Checklist）
- [ ] 设计可直接落地到代码（方法签名/数据结构明确）
- [ ] 图表能覆盖核心链路
- [ ] 数据库索引/迁移方案明确
- [ ] 异常处理与降级策略完整
- [ ] 满足REQ中的性能指标

---

## 4. 开发任务清单（TASK）生成标准

### 4.1 WBS分解原则（必须）
- 任务粒度以“**可在0.5~3小时内完成**”为宜
- 任务必须可验收：每个任务都有明确交付物与验收标准
- 任务分阶段：数据模型→核心功能→页面改造→测试优化

### 4.2 每个任务的标准字段（必须）
建议统一模板：
- **任务编号**：`Task X.Y`
- **任务名称**：20字以内
- **优先级**：高/中/低
- **预计工时**：小时
- **依赖任务**：前置任务列表
- **实现要点**：做什么、改哪里、注意点
- **交付物**：代码/脚本/测试/页面
- **验收标准**：可检查的结果

### 4.3 项目管理增强项（必须包含）
- **任务依赖关系图**：覆盖所有阶段，能识别关键路径
- **关键路径（Critical Path）**：给出关键任务序列与总时长
- **风险评估矩阵**：
  - 风险ID、描述、概率、影响、等级、应对策略、负责人
  - 风险矩阵图（概率×影响）
  - 风险监控计划（指标/频率/触发条件/升级策略）
- **资源分配表**：人力、设备、成本预算
- **甘特图（Gantt）**：按天/周展示排期，标注里程碑
- **里程碑**：每个里程碑包含交付物与验收标准

### 4.4 任务清单质量门槛（Checklist）
- [ ] 依赖关系清晰且无循环依赖
- [ ] 工时估算合理，关键路径可控
- [ ] 风险有对应对策与负责人
- [ ] 排期可执行（考虑缓冲与评审时间）
- [ ] 里程碑交付物可验收

---

## 5. 文档生成/评审/发布/维护流程（建议统一执行）

### 5.1 生成流程
- **REQ**：需求收集 → 需求分析 → 画图（用例/流程/状态/DFD）→ 编写 → 同行评审 → 修订 → 审批发布
- **DES**：架构设计 → 详细设计 → 画图（类/序列/组件）→ 编写 → 技术评审 → 修订 → 审批发布
- **TASK**：WBS分解 → 依赖分析 → 工时估算 → 风险识别 → 资源与排期（甘特图）→ 评审 → 发布

### 5.2 变更维护规则
- 触发条件：需求变更、设计调整、排期变化、风险升级、里程碑变更
- 更新步骤：提出变更 → 评估影响 → 修改文档 → 升级版本号 → 记录变更历史 → 重新评审/审批 → 重新分发

---

## 6. 交付与归档
- 文档发布后，建议在项目根目录保留最新版本
- 重要版本在`变更历史`中记录，必要时保留历史文件（以版本号区分）

---

**标准总结结束**
